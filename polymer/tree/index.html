<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tree</title>
    <style>
        #root {
            margin-top: 20px;
            width: 100%;
        }

        .folder-container {
            padding: 0 20px;
            margin: 0;
        }

        .folder-wrapper {
            margin: 0;
            padding: 0;
            list-style-type: none;
        }

        .folder-item {
            height: 24px;
            line-height: 24px;
            vertical-align: middle;
            margin-left: -16px;
            padding-left: 32px;
            list-style-type: none;
            font-weight: bold;
            background: transparent url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAACDUlEQVRIS2NkoDFgpLH5DPSzoKGhgenYsWMi2Hz09+9fxr17974kx7dgH4AMl5WR6WZjZ3fCZgg7O/vH48ePT+zv719PqiVgCxwcHHgCAwP3yMnJmR89ehTDDCcnZwZxMdEPR48dW/DmzZuvhCyRkpLakJGRcQakDm5BaGjortDQUMuXLzFDQlJSikFISJDh7du3DH/+/IWa/5/h/3/sVq1bu+bomrVrXQ4cOPADxYKsrCxLbFogBkFMQxiK24IZ06cf3bR5k/uuXbu+jlqANRIoDqIvX74wTNh4iOHxu09YLXh0/9bHL08ezT22dl4xPA4cnN2OOTg76zIyEsjcLGwM/YcfMGwS82T4x8SKM8VqHui8JHV3jxvMgoArrm3rfnEKEC46/v9n+CSmRSgrMJhuyjyowPDWGWygi4ODzRn33oMfJIyYCOokQgHL768MmssiF14+sDkBYoGLi+EF45J9b1TcBYjQT1AJ5+enDGqroiounjjUCbbAzcFB47x6/K7XBgmyBHUToYD/1eX/uruzvI4cObID5gO56+JuO55alGoSoZ+gEpGbq18Z3JjlsmfPnsuwSBZ5yG+8675DjyFB3UQokD9Sc0Xj1SG3nYcPP4elGkZlK5+Ov2LaLkToJ6iE5dW1HXeOba6Gl6YgBqhOOHDggBBB3UQoOHDgwFtY6Ug43RNhID4lQ98CAOgNBwq57yJdAAAAAElFTkSuQmCC') no-repeat left center;
        }

    </style>
</head>
<body>
<div id="root"></div>
</body>
<script>
  const tree = {
    id: 'tree-1',
    name: 'app',
    items: [
      {
        id: 'leaf-1',
        name: 'index.html'
      },
      {
        id: 'tree-2',
        name: 'js',
        items: [
          {
            id: 'leaf-2',
            name: 'main.js'
          },
          {
            id: 'leaf-3',
            name: 'app.js'
          },
          {
            id: 'leaf-4',
            name: 'misc.js'
          },
          {
            id: 'tree-3',
            name: 'vendor',
            items: [
              {
                id: 'leaf-5',
                name: 'jquery.js'
              },
              {
                id: 'leaf-6',
                name: 'underscore.js'
              }
            ]
          }
        ]
      },
      {
        id: 'tree-4',
        name: 'css',
        items: [
          {
            id: 'leaf-7',
            name: 'reset.css'
          },
          {
            id: 'leaf-8',
            name: 'main.css'
          }
        ]
      }
    ]
  };

  function buildTree(data) {
    let ulElement = document.createElement('ul');
    ulElement.classList.add('folder-container');
    if (Array.isArray(data)) {
      for (let node of data) {
        buildNode(ulElement, node);
      }
    } else {
      buildNode(ulElement, data);
    }
    return ulElement;
  }

  function buildNode(root, data) {
    if (data.hasOwnProperty('items')) {
      let treeLiElement = document.createElement('li');
      treeLiElement.classList.add('folder-item');
      treeLiElement.appendChild(document.createTextNode(data['name']));
      root.appendChild(treeLiElement);

      let liLeafElement = document.createElement('li');
      liLeafElement.classList.add('folder-wrapper');
      liLeafElement.appendChild(buildTree(data['items']));
      root.appendChild(liLeafElement);
    } else {
      root.appendChild(buildLeaf(data));
    }
  }

  function buildLeaf(node) {
    let leaf = document.createElement(LeafItem.is);
    leaf.innerHTML = node['name'];
    return leaf
  }

  class LeafItem extends HTMLElement {
    constructor() {
      super();
      let shadowRoot = this.attachShadow({mode: 'open'});
      shadowRoot.innerHTML = `
<style>
    li {
        height: 24px;
        line-height: 24px;
        vertical-align: middle;
        margin-left: -16px;
        padding-left: 32px;
        list-style-type: none;
        background: transparent url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAACQUlEQVRIS2NkIBH4+vpyYdPy588flu3bt39Cl2MkxXxzn+jdYoyfVJmYmH6j62NhYfn+6vnzJYePHetCliPaAlP/xI1v1Xx8Z7jyMqqqqmF1V1Njw43nL1547tix4wFMAVEWmPombnpskefz4x8L4yqLFwxqatgtqK2puff06VOnffv2PSTaApjhL4QMGAVeX2FYbfUSpwU11dWkWWAakLjpsWmeD8hwhn8MDCAL1tq+YlBTV8caRFWVlcRbADL8kVm+z0tBfbDhYAveXGFYa/+aQR2HBZUVFcRZYOKfsOWxeaHXS0E9uOEgC/je3WDY7PSKQRVHHJSXlRG2wNAvftk77fCIt3xqjAz/IS4H4f//mRjs/p5mmJZkzsDBwYE1iMpKS/Fb4ObmJsspIHYuPCZeBG4CyBIGBgY2FmYGIy0lBm4urPkMrKakpJigBYpSUlJ7u7q7FUnJgDC1pUVF9x7jS6Zubm5gC3p6esmyoLiwgDgLevv6yLKgKD+fGAtk9vb3k2dBQV4uYQtkZGT29vX3k+WD/Ly8e48fP8ZdVIDiAGTBhAkTybKgIDfn3gNiLJg4cRJZFuTnZBO2QF5enmwf5GaBfPAAfxCBLCDXB7k52ffuPyDCgsmTp5AVRNlZmcRZMGXKVLIsyMrMwG+Bi4uLkqqq6vaJkyZhr7IIlB9ZmZk3njx5gr/KtLe3LxUTE4v+/fs37lINi0WsrKzfXrx4sfDw4cP9BCt9Nzc37l+/fv0lpcBjY2Nj3rVr11d0PQBUxz8ofx2eggAAAABJRU5ErkJggg==') no-repeat left center;
    }
</style>
<li>
    <slot>Unnamed leaf</slot>
</li>
      `;
    }

    static get is() {
      return 'leaf-item'
    }
  }

  customElements.define(LeafItem.is, LeafItem);
  document.getElementById("root").appendChild(buildTree(tree));
</script>
</html>